<!DOCTYPE html>
<html lang="en">
  <head>
    <link href="/" rel="canonical" />
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Product | Amazon</title>

    <link
      rel="stylesheet"
      href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.1/css/all.min.css"
      integrity="sha512-DTOQO9RWCH3ppGqcWaEA1BIZOC6xxalwEsw9c2QQeAIftl+Vegovlnee1c9QX4TctnWMn13TZye+giMm8e2LwA=="
      crossorigin="anonymous"
      referrerpolicy="no-referrer"
    />
    <link rel="stylesheet" href="../css/styles.css" />

    <style>
      .search_bar {
        width: max-content;
        display: flex;
        align-items: center;
        padding: 14px;
        border-radius: 28px;
        background: #ece6e6;
        width: 600px;
        margin: auto;
        margin-top: 14px;
        margin-bottom: 14px;
        border: 2px solid #0891b2;
      }

      #searchInput {
        font-size: 16px;
        font-family: "Lexend", sans-serif;
        color: #333333;
        margin-left: 14px;
        outline: none;
        border: none;
        background: transparent;
        flex: 1;
      }

      .search-icon {
        color: #333333;
      }

      .sec{
        padding: 10px 5%;
      }

      .products{
        display: grid;
        grid-template-columns: repeat(auto-fit, minmax(320, 1fr));
      }

      .products .items{
        width: 320px;
        background: #f5f5f5;
        box-shadow: 0 10px 20px rgba(0, 0, 0, 0.3);
        border-radius: 5px;
        padding: 5px;
        margin-bottom: 20px;
        /*height: 420px;*/
      }

      .products .items a{
        text-decoration: none;
      }
      
      .products .items .product_image{
        height: 240px;
        width: 90%;
      }

      .products .items .product_name{
        font-weight: 900;
        font-size: 20px;
        color: #424144;
        padding: 0 20px;
      }

      .products .items .box{
        display: flex;
        justify-content: space-between;
        align-items: center;
        padding: 20px;
        width: 85%;
        height: 20px;
        background: transparent;
      }

      .products .items .box .price{
        color: #0891b2;
        font-size: 20px;
        font-weight: bold;
      }

      .products .items .box .btn{
        font-size: 13px;
        color: #0891b2;
        padding: 10px 18px;
        font-weight: 900;
        border: 1px solid #0891b2;
        border-radius: 20px;
      }

      .products .items .box .btn:hover{
        cursor: pointer;
        background-color: #0891b2;
        color: white;
      }
    </style>
  </head>
  <body>
    <%- navbar %>

    <!-- Search bar -->
    <div class="search_bar">
      <i class="search-icon fa-solid fa-magnifying-glass"></i>
      <input type="text" id="searchInput" placeholder="Search products..." />
    </div>

    <!-- products -->
    <% products.forEach(product => { %>
    <div class="sec">
      <div class="products">
        <div class="items">
          <!-- linking whole items to product page link -->
          <a href="/product-info/<%= product.name %>" class="product_name">
            <!-- product image -->
            <img
              src="<%= product.image %>"
              alt="<%= product.image %>"
              class="product_image"
            />
            <!-- product name -->
            <div class="product_name"><%= product.name %></div>
            <!-- add to cart button -->
            <div class="box">
              <div class="price">$<%= product.price %></div>
              <button class="btn">Add to Cart</button>
            </div>
          </a>
        </div>
      </div>
    </div>
    <% }); %>
    <!-- script for search bar -->
    <script>
      function searchProducts() {
        var searchText = document
          .getElementById("searchInput")
          .value.toLowerCase();

        var productNames = document.querySelectorAll(".product_name");

        productNames.forEach((productNameElement) => {
          var productName = productNameElement.textContent.toLowerCase();
          var item = productNameElement.closest(".items");
          if (productName.includes(searchText)) {
            item.style.display = "block";
          } else {
            item.style.display = "none";
          }
        });
      }

      document
        .getElementById("searchInput")
        .addEventListener("input", searchProducts);
    </script>
  </body>
</html>
