<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Home | Amazon</title>

    <link
      rel="stylesheet"
      href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.1/css/all.min.css"
      integrity="sha512-DTOQO9RWCH3ppGqcWaEA1BIZOC6xxalwEsw9c2QQeAIftl+Vegovlnee1c9QX4TctnWMn13TZye+giMm8e2LwA=="
      crossorigin="anonymous"
      referrerpolicy="no-referrer"
    />
    <link rel="stylesheet" href="../css/styles.css" />
  </head>
  <body>
    <%- navbar %>

    <!-- Search bar -->
    <div class="search_bar">
      <input type="text" id="searchInput" placeholder="Search products..." />
    </div>

    <!-- products -->
    <% products.forEach(product => { %>
    <div class="items">
      <!-- linking whole items to product page link -->
      <a href="/product-info/<%= product.name %>" class="product_name">
        <!-- product image -->
        <img
          src="<%= product.image %>"
          alt="<%= product.image %>"
          class="product_image"
        />
        <!-- product name -->
        <h6 class="product_name"><%= product.name %></h6>
        <!-- add to cart button -->
      </a>
    </div>
    <% }); %>
    <!-- script for search bar -->
    <script>
      function searchProducts() {
        var searchText = document
          .getElementById("searchInput")
          .value.toLowerCase();

        var productNames = document.querySelectorAll(".product_name");

        productNames.forEach((productNameElement) => {
          var productName = productNameElement.textContent.toLowerCase();
          var item = productNameElement.closest(".items");
          if (productName.includes(searchText)) {
            item.style.display = "block";
          } else {
            item.style.display = "none";
          }
        });
      }

      document
        .getElementById("searchInput")
        .addEventListener("input", searchProducts);
    </script>
  </body>
</html>
